<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0a1628">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ScrollStop">
<link rel="apple-touch-icon" href="icon-192.png">
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="VAIC ScrollStop">
<meta name="msapplication-TileColor" content="#0a1628">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VAIC ScrollStop — Content Optimizer by Voss AI Consulting</title>
<style>
/* ============================================================
   VAIC LINKEDIN TOOLKIT — GLOBAL STYLES
   Blue & Gold branding matching PromptFlow
   ============================================================ */
:root {
    --bg-deepest: #060e1a;
    --bg-dark: #0a1628;
    --bg-panel: #0f1f36;
    --bg-card: #142742;
    --bg-input: #0d1a2e;
    --bg-hover: #1a3050;
    --blue-primary: #1e3a5f;
    --blue-mid: #2d5f8a;
    --blue-light: #4a90d9;
    --blue-bright: #5ba3ec;
    --gold-primary: #c9a227;
    --gold-light: #e8c84a;
    --gold-dark: #9a7b1c;
    --gold-glow: rgba(201, 162, 39, 0.3);
    --text-primary: #e8ecf1;
    --text-secondary: #8899aa;
    --text-muted: #556677;
    --danger: #e74c3c;
    --success: #2ecc71;
    --warning: #f39c12;
    --border: rgba(45, 95, 138, 0.3);
    --radius: 8px;
    --radius-lg: 12px;
    --shadow: 0 4px 24px rgba(0,0,0,0.4);
    --transition: 0.2s ease;
    --font-main: 'Segoe UI', system-ui, -apple-system, sans-serif;
    --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { height: 100%; overflow: hidden; }
body {
    font-family: var(--font-main);
    background: var(--bg-deepest);
    color: var(--text-primary);
}
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--bg-dark); }
::-webkit-scrollbar-thumb { background: var(--blue-primary); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--blue-mid); }

/* ============================================================
   SPLASH SCREEN
   ============================================================ */
#splash {
    position: fixed; inset: 0; z-index: 9999;
    background: radial-gradient(ellipse at center, #0f1f36 0%, #060e1a 70%);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    transition: opacity 0.6s ease, visibility 0.6s ease;
}
#splash.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
#splash .logo-mark {
    width: 80px; height: 80px; border-radius: 20px;
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-light));
    display: flex; align-items: center; justify-content: center;
    font-size: 36px; font-weight: 800; color: var(--bg-deepest);
    margin-bottom: 20px; box-shadow: 0 0 60px var(--gold-glow);
    animation: pulse-glow 2s ease-in-out infinite;
}
@keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 40px var(--gold-glow); }
    50% { box-shadow: 0 0 80px var(--gold-glow), 0 0 120px rgba(201,162,39,0.1); }
}
#splash h1 { font-size: 28px; font-weight: 700; color: var(--text-primary); letter-spacing: 1px; }
#splash h1 span { color: var(--gold-primary); }
#splash p { color: var(--text-secondary); margin-top: 8px; font-size: 14px; letter-spacing: 2px; text-transform: uppercase; }
#splash .splash-loader { margin-top: 40px; width: 200px; height: 3px; background: var(--bg-card); border-radius: 3px; overflow: hidden; }
#splash .splash-loader-bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--gold-primary), var(--gold-light)); border-radius: 3px; transition: width 0.3s ease; }

/* ============================================================
   APP SHELL
   ============================================================ */
#app { display: flex; height: 100vh; opacity: 0; transition: opacity 0.4s ease; }
#app.visible { opacity: 1; }

/* Sidebar */
#sidebar {
    width: 220px; min-width: 220px;
    background: var(--bg-dark);
    border-right: 1px solid var(--border);
    display: flex; flex-direction: column;
    z-index: 100;
}
.sidebar-brand {
    padding: 20px 16px; border-bottom: 1px solid var(--border);
    display: flex; align-items: center; gap: 12px;
}
.sidebar-brand .logo-sm {
    width: 36px; height: 36px; border-radius: 8px;
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-light));
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; font-weight: 800; color: var(--bg-deepest);
    flex-shrink: 0;
}
.sidebar-brand .brand-text { font-size: 15px; font-weight: 700; line-height: 1.2; }
.sidebar-brand .brand-text span { color: var(--gold-primary); }
.sidebar-brand .brand-sub { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1.5px; }

.sidebar-nav { flex: 1; padding: 12px 8px; display: flex; flex-direction: column; gap: 4px; }
.nav-section { font-size: 10px; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1.5px; padding: 12px 12px 6px; }
.nav-btn {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 12px; border-radius: var(--radius);
    background: transparent; border: none; color: var(--text-secondary);
    font-size: 14px; cursor: pointer; transition: all var(--transition);
    text-align: left; width: 100%; font-family: var(--font-main);
}
.nav-btn:hover { background: var(--bg-hover); color: var(--text-primary); }
.nav-btn.active { background: var(--blue-primary); color: var(--gold-light); font-weight: 600; }
.nav-btn svg { width: 18px; height: 18px; flex-shrink: 0; }
.nav-btn .badge-new {
    margin-left: auto; font-size: 9px; font-weight: 700; background: var(--gold-primary);
    color: var(--bg-deepest); padding: 2px 6px; border-radius: 100px; letter-spacing: 0.5px;
}

.sidebar-footer {
    padding: 16px; border-top: 1px solid var(--border);
    font-size: 11px; color: var(--text-muted); text-align: center; line-height: 1.6;
}
.sidebar-footer a { color: var(--gold-primary); text-decoration: none; }

/* Main content */
#main { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }

/* Pages */
.page { display: none; flex: 1; overflow: hidden; flex-direction: column; }
.page.active { display: flex; }
.page-header {
    padding: 20px 28px; border-bottom: 1px solid var(--border);
    display: flex; align-items: center; justify-content: space-between; gap: 16px;
    flex-shrink: 0; background: var(--bg-dark);
}
.page-header h2 { font-size: 20px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
.page-header h2 svg { width: 22px; height: 22px; color: var(--gold-primary); }
.page-header .page-desc { font-size: 13px; color: var(--text-muted); }
.page-body { flex: 1; overflow-y: auto; padding: 28px; }

/* ============================================================
   SHARED COMPONENTS
   ============================================================ */
.btn {
    padding: 8px 16px; border-radius: var(--radius); border: none;
    font-size: 13px; font-weight: 600; cursor: pointer;
    font-family: var(--font-main); transition: all var(--transition);
    display: inline-flex; align-items: center; gap: 6px;
}
.btn-gold { background: linear-gradient(135deg, var(--gold-primary), var(--gold-dark)); color: var(--bg-deepest); }
.btn-gold:hover { background: linear-gradient(135deg, var(--gold-light), var(--gold-primary)); }
.btn-blue { background: var(--blue-mid); color: white; }
.btn-blue:hover { background: var(--blue-light); }
.btn-ghost { background: transparent; color: var(--text-secondary); border: 1px solid var(--border); }
.btn-ghost:hover { background: var(--bg-hover); color: var(--text-primary); }
.btn-sm { padding: 5px 10px; font-size: 12px; }

.card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 20px; }
.card-label { font-size: 10px; font-weight: 700; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1.2px; margin-bottom: 14px; }

textarea, input[type="text"], input[type="url"] {
    background: var(--bg-input); border: 1px solid var(--border);
    color: var(--text-primary); border-radius: var(--radius);
    padding: 10px 14px; font-size: 14px; font-family: var(--font-main);
    transition: border-color var(--transition); outline: none; width: 100%;
    line-height: 1.6;
}
textarea:focus, input:focus { border-color: var(--gold-primary); }
textarea { resize: vertical; min-height: 200px; }

/* Layout helpers */
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }
.flex-col { display: flex; flex-direction: column; gap: 16px; }
.flex-row { display: flex; gap: 16px; align-items: start; }
@media(max-width:900px) { .grid-2, .grid-3, .layout-main { grid-template-columns: 1fr !important; } }

.layout-main { display: grid; grid-template-columns: 1fr 340px; gap: 20px; align-items: start; }

/* Stats */
.stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.stat-box { background: rgba(45,95,138,.15); border-radius: var(--radius); padding: 12px; text-align: center; }
.stat-box .num { font-family: var(--font-mono); font-size: 24px; font-weight: 600; line-height: 1; margin-bottom: 2px; }
.stat-box .lbl { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }

/* Gauge */
.gauge-track { width: 100%; height: 8px; background: rgba(45,95,138,.2); border-radius: 4px; overflow: hidden; }
.gauge-fill { height: 100%; border-radius: 4px; transition: width .3s, background .3s; }
.gauge-labels { display: flex; justify-content: space-between; margin-top: 4px; font-size: 10px; color: var(--text-muted); font-family: var(--font-mono); }

/* Ring */
.ring-wrap { width: 72px; height: 72px; position: relative; flex-shrink: 0; }
.ring-wrap svg { width: 100%; height: 100%; transform: rotate(-90deg); }
.ring-wrap circle { fill: none; stroke-width: 4; stroke-linecap: round; }
.ring-wrap .bg { stroke: rgba(45,95,138,.2); }
.ring-wrap .fg { transition: stroke-dashoffset .6s ease, stroke .3s; }
.ring-label { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; }
.ring-label .rn { font-family: var(--font-mono); font-size: 20px; font-weight: 600; line-height: 1; }
.ring-label .rs { font-size: 8px; color: var(--text-muted); text-transform: uppercase; letter-spacing: .5px; font-weight: 700; }

/* Highlight box */
.highlight { border-radius: var(--radius); padding: 16px; text-align: center; margin-top: 12px; }
.highlight.gold { background: rgba(201,162,39,.08); border: 1px solid rgba(201,162,39,.2); }
.highlight.green { background: rgba(46,204,113,.08); border: 1px solid rgba(46,204,113,.2); }
.highlight.blue { background: rgba(74,144,217,.08); border: 1px solid rgba(74,144,217,.2); }
.highlight .hl-n { font-family: var(--font-mono); font-size: 32px; font-weight: 600; line-height: 1; }
.highlight .hl-t { font-size: 12px; color: var(--text-secondary); margin-top: 4px; }
.highlight.gold .hl-n { color: var(--gold-light); }
.highlight.green .hl-n { color: var(--success); }
.highlight.blue .hl-n { color: var(--blue-bright); }

/* Tips */
.tip { display: flex; align-items: flex-start; gap: 10px; padding: 10px 12px; background: rgba(45,95,138,.1); border-radius: var(--radius); font-size: 13px; color: var(--text-secondary); line-height: 1.5; }
.tip:hover { background: rgba(45,95,138,.15); }
.tip-icon { flex-shrink: 0; width: 22px; height: 22px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 11px; }

/* Hook verdict */
.hook-dot { width: 9px; height: 9px; border-radius: 50%; display: inline-block; margin-right: 6px; }

/* Tag pills */
.tag { display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; border-radius: 100px; font-size: 12px; font-weight: 600; background: rgba(45,95,138,.2); color: var(--text-secondary); }
.tag.gold { background: rgba(201,162,39,.12); color: var(--gold-light); }
.tag.green { background: rgba(46,204,113,.12); color: var(--success); }
.tag.blue { background: rgba(74,144,217,.12); color: var(--blue-bright); }

/* Preview frames */
.preview-frame { background: #fff; border-radius: 12px; overflow: hidden; color: #000; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
.preview-frame.mobile { width: 375px; max-width: 100%; margin: 0 auto; }
.preview-frame.desktop { width: 100%; max-width: 600px; margin: 0 auto; }
.preview-header { padding: 14px 16px; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #e8e8e8; }
.preview-avatar { width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, var(--gold-primary), var(--blue-mid)); display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 700; font-size: 18px; flex-shrink: 0; }
.preview-meta .preview-name { font-size: 14px; font-weight: 600; color: #000; }
.preview-meta .preview-headline { font-size: 12px; color: #666; }
.preview-meta .preview-time { font-size: 11px; color: #999; }
.preview-body { padding: 0 16px 14px; }
.preview-text { font-size: 14px; line-height: 1.5; color: #000; white-space: pre-wrap; word-wrap: break-word; }
.preview-text.truncated::after { content: '...see more'; color: #0a66c2; font-weight: 600; cursor: pointer; }
.preview-actions { padding: 8px 16px; border-top: 1px solid #e8e8e8; display: flex; justify-content: space-around; }
.preview-action { font-size: 12px; color: #666; font-weight: 600; padding: 8px; display: flex; align-items: center; gap: 4px; }

/* API Key input section */
.api-section { padding: 14px; background: rgba(45,95,138,.1); border-radius: var(--radius); margin-bottom: 16px; }
.api-section label { font-size: 12px; font-weight: 600; color: var(--text-secondary); display: block; margin-bottom: 6px; }
.api-section input { font-family: var(--font-mono); font-size: 13px; }
.api-section .api-note { font-size: 11px; color: var(--text-muted); margin-top: 6px; }

/* Generate button area */
.gen-area { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
.gen-output { margin-top: 16px; }
.hook-result { padding: 14px; background: var(--bg-panel); border: 1px solid var(--border); border-radius: var(--radius); margin-bottom: 10px; cursor: pointer; transition: all var(--transition); display: flex; align-items: flex-start; gap: 10px; }
.hook-result:hover { border-color: var(--gold-primary); background: var(--bg-hover); }
.hook-result .hook-num { font-family: var(--font-mono); font-size: 11px; font-weight: 700; color: var(--text-muted); background: rgba(45,95,138,.2); width: 24px; height: 24px; border-radius: 6px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
.hook-result .hook-text { font-size: 14px; color: var(--text-primary); line-height: 1.5; }
.hook-result .hook-copy { margin-left: auto; font-size: 11px; color: var(--gold-primary); font-weight: 600; white-space: nowrap; opacity: 0; transition: opacity var(--transition); }
.hook-result:hover .hook-copy { opacity: 1; }

/* Hashtag results */
.hashtag-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 10px; }
.hashtag-card { background: var(--bg-panel); border: 1px solid var(--border); border-radius: var(--radius); padding: 12px; cursor: pointer; transition: all var(--transition); }
.hashtag-card:hover { border-color: var(--gold-primary); }
.hashtag-card .ht-name { font-size: 14px; font-weight: 600; color: var(--blue-bright); margin-bottom: 4px; }
.hashtag-card .ht-meta { font-size: 11px; color: var(--text-muted); }
.hashtag-card.selected { border-color: var(--gold-primary); background: rgba(201,162,39,.06); }
.selected-tags { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 12px; min-height: 28px; }

/* Mobile responsive */
@media(max-width:768px) {
    #sidebar { display: none; }
    .mobile-header { display: flex !important; }
    .layout-main { grid-template-columns: 1fr !important; }
}
.mobile-header {
    display: none; padding: 12px 16px; background: var(--bg-dark);
    border-bottom: 1px solid var(--border); align-items: center; gap: 12px;
}
.mobile-header .logo-sm {
    width: 32px; height: 32px; border-radius: 6px;
    background: linear-gradient(135deg, var(--gold-primary), var(--gold-light));
    display: flex; align-items: center; justify-content: center;
    font-size: 12px; font-weight: 800; color: var(--bg-deepest);
}
.mobile-header select {
    background: var(--bg-input); border: 1px solid var(--border); color: var(--text-primary);
    border-radius: var(--radius); padding: 6px 10px; font-size: 13px; font-family: var(--font-main);
}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
    <div class="logo-mark">SS</div>
    <h1>VAIC <span>ScrollStop</span></h1>
    <p>Voss AI Consulting</p>
    <div class="splash-loader"><div class="splash-loader-bar" id="splash-bar"></div></div>
</div>

<!-- APP -->
<div id="app">

<!-- SIDEBAR -->
<div id="sidebar">
    <div class="sidebar-brand">
        <div class="logo-sm">SS</div>
        <div>
            <div class="brand-text">VAIC <span>ScrollStop</span></div>
            <div class="brand-sub">Content Optimizer</div>
        </div>
    </div>
    <div class="sidebar-nav">
        <div class="nav-section">Tools</div>
        <button class="nav-btn active" data-page="analyzer" onclick="showPage('analyzer', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20V10m6 10V4M6 20v-4"/></svg>
            Post Analyzer
        </button>
        <button class="nav-btn" data-page="hooks" onclick="showPage('hooks', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            Hook Generator
            <span class="badge-new">AI</span>
        </button>
        <button class="nav-btn" data-page="hashtags" onclick="showPage('hashtags', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 9h16M4 15h16M10 3l-2 18M16 3l-2 18"/></svg>
            Hashtag Analyzer
        </button>
        <button class="nav-btn" data-page="preview" onclick="showPage('preview', this)">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2"/><path d="M12 18h.01"/></svg>
            Post Preview
        </button>
    </div>
    <div class="sidebar-footer">
        <a href="https://www.vossaiconsulting.com" target="_blank">Voss AI Consulting</a><br>
        Transforming Potential<br>into Performance with AI
    </div>
</div>

<!-- MAIN -->
<div id="main">

<!-- Mobile header -->
<div class="mobile-header">
    <div class="logo-sm">SS</div>
    <select onchange="showPage(this.value)" id="mobile-nav">
        <option value="analyzer">Post Analyzer</option>
        <option value="hooks">Hook Generator</option>
        <option value="hashtags">Hashtag Analyzer</option>
        <option value="preview">Post Preview</option>
    </select>
</div>

<!-- ════════════════════════════════════════════════════════════
     PAGE 1: POST ANALYZER
     ════════════════════════════════════════════════════════════ -->
<div class="page active" id="page-analyzer">
<div class="page-header">
    <div>
        <h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20V10m6 10V4M6 20v-4"/></svg> Post Analyzer</h2>
        <div class="page-desc">Character count, readability, hook analysis, and optimization tips</div>
    </div>
</div>
<div class="page-body">
<div class="layout-main">
    <!-- Editor -->
    <div class="flex-col">
        <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <div class="card-label" style="margin:0">Your LinkedIn Post</div>
                <div style="font-family:var(--font-mono);font-size:13px;font-weight:600"><span id="a-live-count" style="color:var(--gold-light)">0</span><span style="color:var(--text-muted)"> / 3,000</span></div>
            </div>
            <textarea id="a-input" placeholder="Start typing your LinkedIn post here...

The best posts open with a hook that stops the scroll. Try starting with a bold stat, a contrarian take, or a personal confession." oninput="analyzePost()"></textarea>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
                <div style="font-size:12px;display:flex;align-items:center;gap:6px"><span class="hook-dot" id="a-hook-dot" style="background:var(--text-muted)"></span><span id="a-hook-status" style="color:var(--text-muted)">Waiting for content...</span></div>
                <button class="btn btn-ghost btn-sm" onclick="document.getElementById('a-input').value='';analyzePost()">Clear</button>
            </div>
        </div>
        <!-- Hook detail -->
        <div class="card" id="a-hook-card" style="display:none">
            <div class="card-label">Opening Line Analysis</div>
            <div id="a-hook-line" style="font-size:14px;color:var(--text-secondary);font-style:italic;margin-bottom:10px;line-height:1.6"></div>
            <div id="a-hook-verdict" style="font-size:13px;font-weight:600"></div>
        </div>
    </div>
    <!-- Sidebar panels -->
    <div class="flex-col">
        <div class="card">
            <div class="card-label">Character Count</div>
            <div class="gauge-track"><div class="gauge-fill" id="a-char-gauge" style="width:0%;background:var(--blue-mid)"></div></div>
            <div class="gauge-labels"><span>0</span><span>1,300</span><span>3,000</span></div>
            <div id="a-char-zone" style="font-size:12px;font-weight:600;margin-top:8px;color:var(--text-muted)">Write something to begin</div>
            <div class="stat-grid" style="margin-top:14px">
                <div class="stat-box"><div class="num" id="a-words" style="color:var(--blue-bright)">0</div><div class="lbl">Words</div></div>
                <div class="stat-box"><div class="num" id="a-lines" style="color:var(--gold-light)">0</div><div class="lbl">Lines</div></div>
                <div class="stat-box"><div class="num" id="a-paras" style="color:var(--blue-light)">0</div><div class="lbl">Paragraphs</div></div>
                <div class="stat-box"><div class="num" id="a-time" style="color:var(--success)">0s</div><div class="lbl">Read Time</div></div>
            </div>
        </div>
        <div class="card">
            <div class="card-label">Readability Score</div>
            <div style="display:flex;align-items:center;gap:16px">
                <div class="ring-wrap">
                    <svg viewBox="0 0 36 36"><circle class="bg" cx="18" cy="18" r="15.9"/><circle class="fg" id="a-read-ring" cx="18" cy="18" r="15.9" stroke-dasharray="0 100" stroke="var(--text-muted)"/></svg>
                    <div class="ring-label"><div class="rn" id="a-read-score">--</div><div class="rs" id="a-read-grade">Grade</div></div>
                </div>
                <div style="font-size:12px;color:var(--text-secondary);line-height:1.6">
                    Avg sentence: <strong id="a-avg-sent" style="color:var(--text-primary)">--</strong> words<br>
                    Avg word: <strong id="a-avg-word" style="color:var(--text-primary)">--</strong> chars<br>
                    Grade level: <strong id="a-grade-level" style="color:var(--text-primary)">--</strong>
                </div>
            </div>
            <div id="a-read-verdict" style="font-size:12px;color:var(--text-secondary);margin-top:12px;line-height:1.5"></div>
        </div>
        <div class="card">
            <div class="card-label">Optimization Tips</div>
            <div class="flex-col" id="a-tips" style="gap:8px">
                <div class="tip"><div class="tip-icon" style="background:rgba(74,144,217,.15)">&#x270F;</div>Start writing to get real-time tips.</div>
            </div>
        </div>
    </div>
</div>
</div>
</div>

<!-- ════════════════════════════════════════════════════════════
     PAGE 2: HOOK GENERATOR
     ════════════════════════════════════════════════════════════ -->
<div class="page" id="page-hooks">
<div class="page-header">
    <div>
        <h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg> Hook Generator</h2>
        <div class="page-desc">AI-powered opening lines that stop the scroll</div>
    </div>
</div>
<div class="page-body">
<div class="flex-col" style="max-width:720px">
    <div class="card">
        <div class="card-label">What's your post about?</div>
        <textarea id="h-topic" style="min-height:100px" placeholder="Describe your post topic, key message, or paste a draft. The more context you give, the better the hooks.

Example: I want to write about how most AI training for companies fails because it's too theoretical and doesn't give people hands-on practice with their actual workflows."></textarea>
        <div class="grid-2" style="margin-top:12px">
            <div>
                <label style="font-size:11px;color:var(--text-muted);display:block;margin-bottom:4px">Tone</label>
                <select id="h-tone" style="background:var(--bg-input);border:1px solid var(--border);color:var(--text-primary);border-radius:var(--radius);padding:8px 12px;font-size:13px;width:100%">
                    <option value="professional">Professional</option>
                    <option value="bold">Bold / Contrarian</option>
                    <option value="storytelling">Storytelling</option>
                    <option value="data-driven">Data-Driven</option>
                    <option value="vulnerable">Vulnerable / Personal</option>
                </select>
            </div>
            <div>
                <label style="font-size:11px;color:var(--text-muted);display:block;margin-bottom:4px">Number of hooks</label>
                <select id="h-count" style="background:var(--bg-input);border:1px solid var(--border);color:var(--text-primary);border-radius:var(--radius);padding:8px 12px;font-size:13px;width:100%">
                    <option value="5" selected>5 hooks</option>
                    <option value="3">3 hooks</option>
                    <option value="8">8 hooks</option>
                </select>
            </div>
        </div>
    </div>
    <div class="api-section" id="h-api-section">
        <label>Claude API Key <span style="font-size:10px;color:var(--text-muted)">(optional — uses your own key)</span></label>
        <input type="text" id="h-api-key" placeholder="sk-ant-api03-..." style="font-family:var(--font-mono);font-size:12px">
        <div class="api-note">Your key is never stored or sent anywhere except directly to Anthropic's API. Leave blank to use the built-in key.</div>
    </div>
    <div class="gen-area">
        <button class="btn btn-gold btn-lg" onclick="generateHooks()" id="h-gen-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
            Generate Hooks
        </button>
        <span id="h-status" style="font-size:12px;color:var(--text-muted)"></span>
    </div>
    <div id="h-results" class="gen-output"></div>
</div>
</div>
</div>

<!-- ════════════════════════════════════════════════════════════
     PAGE 3: HASHTAG ANALYZER
     ════════════════════════════════════════════════════════════ -->
<div class="page" id="page-hashtags">
<div class="page-header">
    <div>
        <h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 9h16M4 15h16M10 3l-2 18M16 3l-2 18"/></svg> Hashtag Analyzer</h2>
        <div class="page-desc">Find the right hashtags for reach and relevance</div>
    </div>
</div>
<div class="page-body">
<div class="flex-col" style="max-width:720px">
    <div class="card">
        <div class="card-label">Your post content or topic</div>
        <textarea id="ht-input" style="min-height:100px" placeholder="Paste your post or describe your topic. The analyzer will suggest relevant hashtags based on your content." oninput="analyzeHashtags()"></textarea>
    </div>
    <div class="card" id="ht-results-card" style="display:none">
        <div class="card-label">Suggested Hashtags</div>
        <div style="font-size:12px;color:var(--text-muted);margin-bottom:14px">Click to select. LinkedIn recommends 3–5 hashtags per post.</div>
        <div class="hashtag-grid" id="ht-grid"></div>
        <div style="margin-top:16px;padding-top:14px;border-top:1px solid var(--border)">
            <div class="card-label">Selected Hashtags <span id="ht-count" style="color:var(--gold-light)">(0)</span></div>
            <div class="selected-tags" id="ht-selected"></div>
            <button class="btn btn-gold btn-sm" style="margin-top:10px" onclick="copyHashtags()" id="ht-copy-btn">Copy to Clipboard</button>
        </div>
    </div>
    <div class="card">
        <div class="card-label">Hashtag Best Practices</div>
        <div class="flex-col" style="gap:8px">
            <div class="tip"><div class="tip-icon" style="background:rgba(201,162,39,.12)">3-5</div>Use 3–5 hashtags per post. More looks spammy, fewer limits reach.</div>
            <div class="tip"><div class="tip-icon" style="background:rgba(74,144,217,.15)">#</div>Mix broad hashtags (#AI, #Leadership) with niche ones (#EdTech, #AITraining).</div>
            <div class="tip"><div class="tip-icon" style="background:rgba(46,204,113,.12)">&#x2193;</div>Place hashtags at the end of your post, not inline with text.</div>
            <div class="tip"><div class="tip-icon" style="background:rgba(45,95,138,.2)">&#x1F50D;</div>Follow your own hashtags to see what content performs well in each.</div>
        </div>
    </div>
</div>
</div>
</div>

<!-- ════════════════════════════════════════════════════════════
     PAGE 4: POST PREVIEW
     ════════════════════════════════════════════════════════════ -->
<div class="page" id="page-preview">
<div class="page-header">
    <div>
        <h2><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2"/><path d="M12 18h.01"/></svg> Post Preview</h2>
        <div class="page-desc">See how your post looks on mobile vs. desktop</div>
    </div>
</div>
<div class="page-body">
<div class="flex-col" style="max-width:900px">
    <div class="card">
        <div class="card-label">Your Post</div>
        <textarea id="p-input" style="min-height:120px" placeholder="Paste or type your post to see how it will appear on LinkedIn." oninput="updatePreview()"></textarea>
        <div class="grid-2" style="margin-top:12px">
            <div>
                <label style="font-size:11px;color:var(--text-muted);display:block;margin-bottom:4px">Display Name</label>
                <input type="text" id="p-name" value="Dr. Rob Voss" oninput="updatePreview()">
            </div>
            <div>
                <label style="font-size:11px;color:var(--text-muted);display:block;margin-bottom:4px">Headline</label>
                <input type="text" id="p-headline" value="AI Consultant | OpenAI Academy | Associate Professor" oninput="updatePreview()">
            </div>
        </div>
    </div>
    <div class="grid-2">
        <div>
            <div class="card-label" style="margin-bottom:10px;padding-left:4px">&#x1F4F1; Mobile Preview</div>
            <div class="preview-frame mobile" id="p-mobile">
                <div class="preview-header">
                    <div class="preview-avatar" id="p-m-avatar">RV</div>
                    <div class="preview-meta">
                        <div class="preview-name" id="p-m-name">Dr. Rob Voss</div>
                        <div class="preview-headline" id="p-m-headline">AI Consultant | OpenAI Academy</div>
                        <div class="preview-time">Just now · &#x1F310;</div>
                    </div>
                </div>
                <div class="preview-body"><div class="preview-text" id="p-m-text"></div></div>
                <div class="preview-actions">
                    <div class="preview-action">&#x1F44D; Like</div>
                    <div class="preview-action">&#x1F4AC; Comment</div>
                    <div class="preview-action">&#x1F501; Repost</div>
                    <div class="preview-action">&#x2709; Send</div>
                </div>
            </div>
        </div>
        <div>
            <div class="card-label" style="margin-bottom:10px;padding-left:4px">&#x1F5A5; Desktop Preview</div>
            <div class="preview-frame desktop" id="p-desktop">
                <div class="preview-header">
                    <div class="preview-avatar" id="p-d-avatar">RV</div>
                    <div class="preview-meta">
                        <div class="preview-name" id="p-d-name">Dr. Rob Voss</div>
                        <div class="preview-headline" id="p-d-headline">AI Consultant | OpenAI Academy</div>
                        <div class="preview-time">Just now · &#x1F310;</div>
                    </div>
                </div>
                <div class="preview-body"><div class="preview-text" id="p-d-text"></div></div>
                <div class="preview-actions">
                    <div class="preview-action">&#x1F44D; Like</div>
                    <div class="preview-action">&#x1F4AC; Comment</div>
                    <div class="preview-action">&#x1F501; Repost</div>
                    <div class="preview-action">&#x2709; Send</div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>

</div><!-- /main -->
</div><!-- /app -->

<script>
// ══════════════════════════════════════════════════════════════
// NAVIGATION
// ══════════════════════════════════════════════════════════════
function showPage(id, btn) {
    document.querySelectorAll('.page').forEach(function(p){ p.classList.remove('active'); });
    document.querySelectorAll('.nav-btn').forEach(function(b){ b.classList.remove('active'); });
    document.getElementById('page-' + id).classList.add('active');
    if (btn) btn.classList.add('active');
    else document.querySelector('[data-page="'+id+'"]').classList.add('active');
    var sel = document.getElementById('mobile-nav');
    if (sel) sel.value = id;
}

// ══════════════════════════════════════════════════════════════
// SPLASH
// ══════════════════════════════════════════════════════════════
(function(){
    var bar = document.getElementById('splash-bar');
    var steps = [30, 65, 100];
    steps.forEach(function(w, i){
        setTimeout(function(){ bar.style.width = w + '%'; }, (i+1) * 400);
    });
    setTimeout(function(){
        document.getElementById('splash').classList.add('hidden');
        document.getElementById('app').classList.add('visible');
    }, 1600);
})();

// ══════════════════════════════════════════════════════════════
// POST ANALYZER
// ══════════════════════════════════════════════════════════════
function analyzePost() {
    var text = document.getElementById('a-input').value;
    var chars = text.length;
    var words = text.trim() ? text.trim().split(/\s+/).length : 0;
    var lines = text ? text.split('\n').length : 0;
    var paras = text.trim() ? text.trim().split(/\n\s*\n/).filter(function(p){return p.trim()}).length : 0;
    if (paras === 0 && words > 0) paras = 1;
    var readSec = Math.ceil(words / 3.5);

    // Live count
    var lc = document.getElementById('a-live-count');
    lc.textContent = chars.toLocaleString();
    lc.style.color = chars > 3000 ? '#e74c3c' : chars > 2700 ? '#f39c12' : 'var(--gold-light)';

    // Gauge
    var pct = Math.min((chars / 3000) * 100, 100);
    var g = document.getElementById('a-char-gauge');
    g.style.width = pct + '%';
    g.style.background = chars > 3000 ? 'var(--danger)' : chars > 2700 ? 'var(--warning)' : chars > 1300 ? 'var(--success)' : 'var(--blue-mid)';

    // Zone
    var zone = document.getElementById('a-char-zone');
    if (chars === 0) { zone.textContent = 'Write something to begin'; zone.style.color = 'var(--text-muted)'; }
    else if (chars <= 700) { zone.textContent = 'Short & punchy \u2014 great for engagement'; zone.style.color = 'var(--blue-bright)'; }
    else if (chars <= 1300) { zone.textContent = 'Optimal range \u2014 LinkedIn\'s sweet spot'; zone.style.color = 'var(--success)'; }
    else if (chars <= 2500) { zone.textContent = 'Long-form \u2014 make every line earn attention'; zone.style.color = 'var(--warning)'; }
    else if (chars <= 3000) { zone.textContent = 'Near the limit \u2014 tighten where you can'; zone.style.color = 'var(--warning)'; }
    else { zone.textContent = 'Over the 3,000 character limit!'; zone.style.color = 'var(--danger)'; }

    // Stats
    document.getElementById('a-words').textContent = words;
    document.getElementById('a-lines').textContent = lines;
    document.getElementById('a-paras').textContent = paras;
    document.getElementById('a-time').textContent = readSec > 60 ? Math.floor(readSec/60)+'m' : readSec + 's';

    // Readability
    var sentences = text.split(/[.!?]+/).filter(function(s){return s.trim().length > 0});
    var sentCount = Math.max(sentences.length, 1);
    var totalSyll = 0;
    var allWords = text.trim() ? text.trim().split(/\s+/) : [];
    allWords.forEach(function(w){ totalSyll += countSyll(w); });
    var avgSent = words / sentCount;
    var avgSyllW = words > 0 ? totalSyll / words : 0;
    var avgWordLen = 0;
    if (allWords.length > 0) { var tc = allWords.reduce(function(a,w){return a+w.replace(/[^a-zA-Z]/g,'').length},0); avgWordLen = (tc/allWords.length).toFixed(1); }
    var flesch = words > 0 ? 206.835 - (1.015*avgSent) - (84.6*avgSyllW) : 0;
    flesch = Math.max(0, Math.min(100, Math.round(flesch)));
    var fkGrade = words > 0 ? (0.39*avgSent) + (11.8*avgSyllW) - 15.59 : 0;
    fkGrade = Math.max(0, Math.round(fkGrade*10)/10);

    document.getElementById('a-avg-sent').textContent = avgSent.toFixed(1);
    document.getElementById('a-avg-word').textContent = avgWordLen;
    document.getElementById('a-grade-level').textContent = fkGrade > 0 ? fkGrade.toFixed(1) : '--';

    var rs = document.getElementById('a-read-score');
    var rg = document.getElementById('a-read-grade');
    var ring = document.getElementById('a-read-ring');
    if (words < 10) {
        rs.textContent = '--'; rg.textContent = 'Grade'; ring.style.strokeDasharray = '0 100'; ring.style.stroke = 'var(--text-muted)';
        document.getElementById('a-read-verdict').textContent = '';
    } else {
        rs.textContent = flesch;
        var rc = flesch >= 60 ? 'var(--success)' : flesch >= 40 ? 'var(--warning)' : 'var(--danger)';
        ring.style.stroke = rc; ring.style.strokeDasharray = flesch+' '+(100-flesch); rs.style.color = rc;
        rg.textContent = flesch >= 70 ? 'Easy' : flesch >= 50 ? 'Good' : flesch >= 30 ? 'Dense' : 'Hard';
        var v = document.getElementById('a-read-verdict');
        if (flesch >= 60) v.innerHTML = '<span style="color:var(--success)">Great readability.</span> Clear and scannable \u2014 perfect for LinkedIn.';
        else if (flesch >= 40) v.innerHTML = '<span style="color:var(--warning)">Moderate.</span> Consider shorter sentences for LinkedIn\'s fast-scrolling feed.';
        else v.innerHTML = '<span style="color:var(--danger)">Dense.</span> Try shorter sentences and simpler words. Top LinkedIn content reads at 6th\u20138th grade level.';
    }

    // Hook
    var hookCard = document.getElementById('a-hook-card');
    var hookDot = document.getElementById('a-hook-dot');
    var hookStat = document.getElementById('a-hook-status');
    if (words >= 5) {
        hookCard.style.display = '';
        var first = text.split('\n')[0].trim();
        document.getElementById('a-hook-line').textContent = first.length > 140 ? first.substring(0,140)+'\u2026' : first;
        var hs = scoreHook(first);
        if (hs >= 3) { hookDot.style.background='var(--success)'; hookStat.textContent='Strong hook'; hookStat.style.color='var(--success)'; document.getElementById('a-hook-verdict').innerHTML='<span style="color:var(--success)">\u2713 Scroll-stopping opener</span>'; }
        else if (hs >= 2) { hookDot.style.background='var(--warning)'; hookStat.textContent='Decent hook'; hookStat.style.color='var(--warning)'; document.getElementById('a-hook-verdict').innerHTML='<span style="color:var(--warning)">\u25CB Try adding a number or bold claim</span>'; }
        else { hookDot.style.background='var(--danger)'; hookStat.textContent='Weak hook'; hookStat.style.color='var(--danger)'; document.getElementById('a-hook-verdict').innerHTML='<span style="color:var(--danger)">\u2717 Open with a stat, question, or bold statement</span>'; }
    } else { hookCard.style.display = 'none'; hookDot.style.background='var(--text-muted)'; hookStat.textContent='Waiting for content...'; hookStat.style.color='var(--text-muted)'; }

    // Tips
    genTips(text, chars, words, avgSent, flesch, paras);
}

function scoreHook(line) {
    var s = 0;
    if (/\d/.test(line)) s++;
    if (/[?]/.test(line)) s++;
    if (line.length < 80) s++;
    if (/^(I |Here|Most|Stop|The |What|Why|How|Don|This|Every|Nobody|Unpopular|Hot take|Controversial|Truth|Forget|Imagine)/i.test(line)) s++;
    if (/\b(secret|mistake|myth|truth|lesson|hack|tip|never|always|wrong|surprising|shocking)\b/i.test(line)) s++;
    return Math.min(s, 4);
}

function genTips(text, chars, words, avgSent, flesch, paras) {
    var tips = [];
    var hasBreaks = text.indexOf('\n\n') !== -1;
    var hasCTA = /\b(comment|share|follow|link|DM|reply|thoughts|agree|disagree)\b/i.test(text.slice(-200));
    var hashCount = (text.match(/#\w+/g) || []).length;
    if (words === 0) { tips.push({i:'\u270F',c:'rgba(74,144,217,.15)',t:'Start writing to get personalized tips.'}); }
    else {
        if (chars > 1000 && chars <= 1300) tips.push({i:'\u2705',c:'rgba(46,204,113,.12)',t:'Great length! 1,000\u20131,300 chars is the engagement sweet spot.'});
        else if (chars < 300 && words > 10) tips.push({i:'\u2197',c:'rgba(74,144,217,.15)',t:'Consider expanding. Posts under 300 chars get less reach unless very punchy.'});
        else if (chars > 2500) tips.push({i:'\u2702',c:'rgba(201,162,39,.12)',t:'Long post! Make sure the first 3 lines are compelling \u2014 that\'s all people see before "see more."'});
        if (!hasBreaks && words > 50) tips.push({i:'\u00B6',c:'rgba(74,144,217,.15)',t:'Add line breaks between paragraphs. Wall-of-text posts get scrolled past.'});
        if (avgSent > 25) tips.push({i:'\u2702',c:'rgba(201,162,39,.12)',t:'Avg sentence is '+avgSent.toFixed(0)+' words. Keep under 20 for LinkedIn.'});
        if (flesch < 40 && words > 20) tips.push({i:'\u{1F4D6}',c:'rgba(231,76,60,.12)',t:'Readability is low. Use simpler words and shorter sentences.'});
        if (!hasCTA && words > 50) tips.push({i:'\u{1F4AC}',c:'rgba(74,144,217,.15)',t:'No CTA detected. End with a question or invitation to comment.'});
        if (hashCount === 0 && words > 30) tips.push({i:'#',c:'rgba(201,162,39,.12)',t:'Add 3\u20135 relevant hashtags at the end for discoverability.'});
        if (hashCount > 5) tips.push({i:'#',c:'rgba(231,76,60,.12)',t:hashCount+' hashtags is too many. LinkedIn recommends 3\u20135 max.'});
        if (tips.length === 0) tips.push({i:'\u2705',c:'rgba(46,204,113,.12)',t:'Looking solid! Your post checks the major boxes.'});
    }
    document.getElementById('a-tips').innerHTML = tips.map(function(t){ return '<div class="tip"><div class="tip-icon" style="background:'+t.c+'">'+t.i+'</div>'+t.t+'</div>'; }).join('');
}

function countSyll(word) {
    word = word.toLowerCase().replace(/[^a-z]/g,'');
    if (word.length <= 2) return 1;
    word = word.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,'');
    word = word.replace(/^y/,'');
    var m = word.match(/[aeiouy]{1,2}/g);
    return m ? m.length : 1;
}

// ══════════════════════════════════════════════════════════════
// HOOK GENERATOR
// ══════════════════════════════════════════════════════════════
async function generateHooks() {
    var topic = document.getElementById('h-topic').value.trim();
    if (!topic) { document.getElementById('h-status').textContent = 'Please describe your post topic first.'; return; }
    var tone = document.getElementById('h-tone').value;
    var count = document.getElementById('h-count').value;
    var apiKey = document.getElementById('h-api-key').value.trim();
    var btn = document.getElementById('h-gen-btn');
    var status = document.getElementById('h-status');

    btn.disabled = true; btn.textContent = 'Generating...'; status.textContent = 'Calling Claude API...';

    var systemPrompt = 'You are an expert LinkedIn content strategist. Generate exactly ' + count + ' LinkedIn opening hooks (the first 1-2 lines of a post) based on the user\'s topic. Tone: ' + tone + '. Each hook should be designed to stop the scroll and maximize "see more" clicks. Return ONLY a JSON array of strings, no other text. Example: ["Hook 1", "Hook 2"]';

    try {
        var response = await fetch('https://api.anthropic.com/v1/messages', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-api-key': apiKey || '',
                'anthropic-version': '2023-06-01',
                'anthropic-dangerous-direct-browser-access': 'true'
            },
            body: JSON.stringify({
                model: 'claude-sonnet-4-5-20250514',
                max_tokens: 1000,
                system: systemPrompt,
                messages: [{ role: 'user', content: 'Topic/context: ' + topic }]
            })
        });
        var data = await response.json();
        if (data.error) throw new Error(data.error.message || 'API error');
        var text = data.content[0].text;
        var hooks = JSON.parse(text.replace(/```json|```/g, '').trim());
        renderHooks(hooks);
        status.textContent = 'Generated ' + hooks.length + ' hooks';
    } catch(err) {
        status.textContent = 'Error: ' + err.message;
        // Fallback: generate locally
        if (!apiKey) {
            status.textContent = 'No API key \u2014 generating smart templates instead...';
            var fallback = generateLocalHooks(topic, tone, parseInt(count));
            renderHooks(fallback);
            status.textContent = 'Generated ' + fallback.length + ' template hooks (add API key for AI-powered hooks)';
        }
    }
    btn.disabled = false; btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg> Generate Hooks';
}

function generateLocalHooks(topic, tone, count) {
    var words = topic.split(/\s+/).slice(0, 6).join(' ');
    var templates = {
        professional: [
            'Most organizations get ' + words + ' completely wrong. Here\'s what the data actually shows.',
            'I\'ve spent 25 years studying how people adopt new tools. The #1 mistake with ' + words + '?',
            'After working with dozens of teams on ' + words + ', one pattern keeps emerging.',
            'The difference between organizations that succeed with ' + words + ' and those that fail comes down to one thing.',
            'Here\'s what nobody tells you about ' + words + ':',
            'I tracked the results for 3 months. ' + words + ' changed everything.',
            'Stop overthinking ' + words + '. Start here instead.',
            'The ROI of ' + words + ' isn\'t what you think it is. It\'s bigger.'
        ],
        bold: [
            'Unpopular opinion: ' + words + ' is being done backwards by 90% of companies.',
            'Hot take: ' + words + ' doesn\'t fail because of the technology. It fails because of the training.',
            'Everyone is talking about ' + words + '. Almost everyone is wrong.',
            'I\'m going to say what nobody in the ' + words + ' space wants to admit.',
            'Controversial: ' + words + ' workshops are a waste of money. Here\'s what works instead.',
            'The ' + words + ' industry has a dirty secret.',
            'Stop. Before you invest in ' + words + ', read this.',
            'I lost a client because of ' + words + '. Best thing that ever happened to my business.'
        ],
        storytelling: [
            'Last Tuesday, a teacher walked into my training session and said: "I\'m terrified of ' + words + '."',
            'Three months ago, I made a bet on ' + words + '. Here\'s what happened.',
            'The email came at 11pm: "Your ' + words + ' training just saved my job."',
            '"This is impossible." That\'s what they said about ' + words + ' before we started.',
            'I was a history professor. Then ' + words + ' changed the trajectory of my career.',
            'Picture this: 30 educators in a room. Zero confidence in ' + words + '. What I did next surprised everyone.',
            'The moment I knew ' + words + ' was going to change everything was a Tuesday afternoon in Maryville, Missouri.',
            'She was the most resistant person in the room. By Friday, she was the biggest advocate for ' + words + '.'
        ],
        'data-driven': [
            '90% reported productivity gains. 100% adoption. 0 holdouts. Here\'s how ' + words + ' delivered these numbers.',
            'We tracked ' + words + ' outcomes for 3 months. The results: +148% training confidence, +63% productivity belief.',
            'The data is clear: ' + words + ' works. But only if you do this one thing differently.',
            '55% \u2192 90% \u2192 83%. These three numbers tell the entire story of ' + words + '.',
            'I measured ' + words + ' across 8 dimensions over 3 months. Here\'s what the data says.',
            'Most ' + words + ' programs can\'t show you a single metric. I can show you five.',
            'The #1 predictor of ' + words + ' success isn\'t what you\'d expect. (It\'s not budget.)',
            'After analyzing 30+ pre/post assessments on ' + words + ', one finding stands out.'
        ],
        vulnerable: [
            'I almost gave up on ' + words + '. Here\'s what I wish someone had told me.',
            'I\'m going to be honest about ' + words + ': I didn\'t have it all figured out.',
            'The hardest lesson I\'ve learned about ' + words + ' had nothing to do with technology.',
            'I lost my first client. It taught me everything about ' + words + '.',
            'Here\'s what I got wrong about ' + words + ' (and what it cost me).',
            'Being a solopreneur in ' + words + ' is lonely. But last week something shifted.',
            'I\'m a history professor who pivoted into ' + words + '. People thought I was crazy.',
            'Truth: I\'m still figuring out ' + words + '. But here\'s what I know for sure after a year.'
        ]
    };
    var pool = templates[tone] || templates.professional;
    var shuffled = pool.sort(function(){ return 0.5 - Math.random(); });
    return shuffled.slice(0, count);
}

function renderHooks(hooks) {
    var el = document.getElementById('h-results');
    el.innerHTML = hooks.map(function(h, i){
        return '<div class="hook-result" onclick="copyHook(this,\''+escapeHtml(h)+'\')"><div class="hook-num">'+(i+1)+'</div><div class="hook-text">'+escapeHtml(h)+'</div><div class="hook-copy">Click to copy</div></div>';
    }).join('');
}

function copyHook(el, text) {
    navigator.clipboard.writeText(text.replace(/&amp;/g,'&').replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&#39;/g,"'").replace(/&quot;/g,'"'));
    var cp = el.querySelector('.hook-copy');
    cp.textContent = 'Copied!'; cp.style.color = 'var(--success)';
    setTimeout(function(){ cp.textContent = 'Click to copy'; cp.style.color = 'var(--gold-primary)'; }, 1500);
}

function escapeHtml(t) { return t.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;'); }

// ══════════════════════════════════════════════════════════════
// HASHTAG ANALYZER
// ══════════════════════════════════════════════════════════════
var selectedHashtags = [];
var hashtagDB = {
    ai: [{tag:'#AI',size:'Broad',followers:'35M+'},{tag:'#ArtificialIntelligence',size:'Broad',followers:'18M+'},{tag:'#AITraining',size:'Niche',followers:'120K'},{tag:'#GenerativeAI',size:'Mid',followers:'2.1M'},{tag:'#AIAdoption',size:'Niche',followers:'45K'},{tag:'#AIStrategy',size:'Niche',followers:'85K'}],
    education: [{tag:'#EdTech',size:'Mid',followers:'3.2M'},{tag:'#Education',size:'Broad',followers:'22M+'},{tag:'#HigherEd',size:'Mid',followers:'1.8M'},{tag:'#ProfessionalDevelopment',size:'Mid',followers:'4.5M'},{tag:'#Teaching',size:'Mid',followers:'6.1M'},{tag:'#OnlineLearning',size:'Mid',followers:'2.3M'}],
    leadership: [{tag:'#Leadership',size:'Broad',followers:'42M+'},{tag:'#Management',size:'Broad',followers:'28M+'},{tag:'#ExecutiveCoaching',size:'Niche',followers:'580K'},{tag:'#ChangeManagement',size:'Niche',followers:'890K'},{tag:'#FutureOfWork',size:'Mid',followers:'3.8M'}],
    business: [{tag:'#Business',size:'Broad',followers:'45M+'},{tag:'#Entrepreneurship',size:'Broad',followers:'25M+'},{tag:'#SmallBusiness',size:'Mid',followers:'8.2M'},{tag:'#Consulting',size:'Mid',followers:'5.1M'},{tag:'#Innovation',size:'Mid',followers:'12M+'},{tag:'#ROI',size:'Niche',followers:'340K'}],
    productivity: [{tag:'#Productivity',size:'Broad',followers:'15M+'},{tag:'#WorkSmarter',size:'Niche',followers:'280K'},{tag:'#Efficiency',size:'Niche',followers:'420K'},{tag:'#Automation',size:'Mid',followers:'3.5M'}],
    training: [{tag:'#Training',size:'Mid',followers:'7.8M'},{tag:'#LearningAndDevelopment',size:'Mid',followers:'2.9M'},{tag:'#CorporateTraining',size:'Niche',followers:'650K'},{tag:'#WorkshopDesign',size:'Niche',followers:'45K'},{tag:'#Upskilling',size:'Niche',followers:'380K'}],
    data: [{tag:'#DataDriven',size:'Niche',followers:'520K'},{tag:'#Analytics',size:'Mid',followers:'4.2M'},{tag:'#DataScience',size:'Mid',followers:'6.8M'}],
    tech: [{tag:'#Technology',size:'Broad',followers:'38M+'},{tag:'#DigitalTransformation',size:'Mid',followers:'5.4M'},{tag:'#TechTrends',size:'Niche',followers:'890K'}]
};

function analyzeHashtags() {
    var text = document.getElementById('ht-input').value.toLowerCase();
    if (text.trim().length < 10) { document.getElementById('ht-results-card').style.display = 'none'; return; }
    document.getElementById('ht-results-card').style.display = '';

    var matched = [];
    var categories = {
        ai: /\b(ai|artificial intelligence|machine learning|chatgpt|claude|gpt|llm|generative|prompt|model)\b/,
        education: /\b(education|teach|school|student|professor|university|classroom|curriculum|faculty|course|academic)\b/,
        leadership: /\b(leader|leadership|executive|ceo|manage|c-suite|director|strategy|vision)\b/,
        business: /\b(business|company|organization|firm|enterprise|startup|revenue|profit|client|customer|roi|consult)\b/,
        productivity: /\b(productiv|efficien|workflow|automat|time|faster|streamline|optimize)\b/,
        training: /\b(train|workshop|professional development|onboard|skill|learn|upskill|develop)\b/,
        data: /\b(data|metric|measure|assessment|survey|longitudinal|analytics|evidence|research)\b/,
        tech: /\b(tech|digital|software|tool|platform|app|cloud|transform)\b/
    };

    for (var cat in categories) {
        if (categories[cat].test(text)) {
            hashtagDB[cat].forEach(function(h) {
                if (!matched.find(function(m){return m.tag===h.tag})) matched.push(h);
            });
        }
    }

    if (matched.length === 0) matched = hashtagDB.ai.concat(hashtagDB.business).slice(0, 6);

    var grid = document.getElementById('ht-grid');
    grid.innerHTML = matched.map(function(h){
        var sel = selectedHashtags.indexOf(h.tag) !== -1;
        return '<div class="hashtag-card'+(sel?' selected':'')+'" onclick="toggleHashtag(\''+h.tag+'\',this)"><div class="ht-name">'+h.tag+'</div><div class="ht-meta">'+h.size+' \u00B7 '+h.followers+' followers</div></div>';
    }).join('');
    updateSelectedDisplay();
}

function toggleHashtag(tag, el) {
    var idx = selectedHashtags.indexOf(tag);
    if (idx === -1) { if (selectedHashtags.length >= 5) return; selectedHashtags.push(tag); el.classList.add('selected'); }
    else { selectedHashtags.splice(idx, 1); el.classList.remove('selected'); }
    updateSelectedDisplay();
}

function updateSelectedDisplay() {
    document.getElementById('ht-count').textContent = '(' + selectedHashtags.length + ')';
    var el = document.getElementById('ht-selected');
    if (selectedHashtags.length === 0) { el.innerHTML = '<span style="font-size:12px;color:var(--text-muted)">Click hashtags above to select them</span>'; }
    else { el.innerHTML = selectedHashtags.map(function(t){ return '<span class="tag gold">'+t+'</span>'; }).join(''); }
}

function copyHashtags() {
    if (selectedHashtags.length === 0) return;
    navigator.clipboard.writeText(selectedHashtags.join(' '));
    var btn = document.getElementById('ht-copy-btn');
    btn.textContent = 'Copied!'; setTimeout(function(){ btn.textContent = 'Copy to Clipboard'; }, 1500);
}

// ══════════════════════════════════════════════════════════════
// POST PREVIEW
// ══════════════════════════════════════════════════════════════
function updatePreview() {
    var text = document.getElementById('p-input').value;
    var name = document.getElementById('p-name').value || 'Your Name';
    var headline = document.getElementById('p-headline').value || 'Your Headline';
    var initials = name.split(' ').map(function(w){return w[0]}).join('').toUpperCase().slice(0,2);

    // Mobile: truncate after ~3 lines (~210 chars)
    var mobileText = text;
    var truncated = false;
    if (text.length > 210) {
        var cutPoint = text.lastIndexOf(' ', 210);
        if (cutPoint === -1) cutPoint = 210;
        mobileText = text.substring(0, cutPoint);
        truncated = true;
    }

    // Desktop: truncate after ~5 lines (~450 chars)
    var desktopText = text;
    var dTruncated = false;
    if (text.length > 450) {
        var dCut = text.lastIndexOf(' ', 450);
        if (dCut === -1) dCut = 450;
        desktopText = text.substring(0, dCut);
        dTruncated = true;
    }

    ['m','d'].forEach(function(prefix){
        document.getElementById('p-'+prefix+'-name').textContent = name;
        document.getElementById('p-'+prefix+'-headline').textContent = headline.length > 45 ? headline.substring(0,45)+'...' : headline;
        document.getElementById('p-'+prefix+'-avatar').textContent = initials;
    });

    var mEl = document.getElementById('p-m-text');
    mEl.textContent = mobileText;
    mEl.className = 'preview-text' + (truncated ? ' truncated' : '');

    var dEl = document.getElementById('p-d-text');
    dEl.textContent = desktopText;
    dEl.className = 'preview-text' + (dTruncated ? ' truncated' : '');
}
</script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js')
      .then(r => console.log('SW registered:', r.scope))
      .catch(e => console.log('SW failed:', e));
  });
}
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  const footer = document.querySelector('.sidebar-footer');
  if (footer && !document.querySelector('.install-btn')) {
    const btn = document.createElement('button');
    btn.className = 'install-btn';
    btn.textContent = '\u2B07 Install App';
    btn.style.cssText = 'display:block;width:100%;margin-top:8px;padding:8px;border:1px solid rgba(201,162,39,.3);border-radius:8px;background:rgba(201,162,39,.08);color:#e8c84a;font-size:12px;font-weight:600;cursor:pointer;font-family:var(--font-main);transition:all .2s';
    btn.onmouseover = () => btn.style.background = 'rgba(201,162,39,.15)';
    btn.onmouseout = () => btn.style.background = 'rgba(201,162,39,.08)';
    btn.onclick = async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const result = await deferredPrompt.userChoice;
        if (result.outcome === 'accepted') btn.remove();
        deferredPrompt = null;
      }
    };
    footer.appendChild(btn);
  }
});
</script>
</body>
</html>
